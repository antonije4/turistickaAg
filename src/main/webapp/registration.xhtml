<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/layout/layout.xhtml">

    <f:metadata>
        <f:viewAction action="#{registrationController.init()}" />
    </f:metadata>

    <ui:define name="content">

            <p:panel id="panelpanel" style="margin-left: 400px; margin-right: 400px">
                <p:selectOneRadio id="userType"
                                  value="#{registrationController.userType}">
                    <p:ajax event="change" update="centralForm" process="@this"/>
                    <f:selectItems value="#{registrationController.allUserTypes.entrySet()}" var="entry"
                        itemValue="#{entry.key}" itemLabel="#{entry.value}"/>
                </p:selectOneRadio>
                <h:panelGrid id="ugostiteljGrid" rendered="#{registrationController.renderUgostiteljData()}" columns="3">

                    <p:outputLabel value="Tip korisnika"/>
                    <p:selectOneMenu id="ugostiteljType"
                                     value="#{registrationController.ugostitelj.tipUgostitelja}" required="true"
                                     styleClass="full-width val-static">
                        <p:ajax event="change" update="centralForm" process="@this"/>
                        <f:selectItems value="#{registrationController.allUgostiteljTypes.entrySet()}" var="entry"
                            itemValue="#{entry.key}" itemLabel="#{entry.value}"/>
                    </p:selectOneMenu>
                    <p:outputLabel value=""/>


                    <p:outputLabel value="Username"/>
                    <p:inputText required="true" requiredMessage="Polje username ne sme biti prazno!" id="username" value="#{registrationController.ugostitelj.username}" label="Username" />
                    <p:message for="username"/>

                    <p:outputLabel value="Password"/>
                    <p:password required="true" requiredMessage="Polje password ne sme biti prazno!" validatorMessage="Password mora sadrzati makar osam karaktera, jedno slovo i jedan broj!" id="password" value="#{registrationController.ugostitelj.password}" label="Password">
                        <f:validateRegex pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$"/>
                    </p:password>
                    <p:message for="password"/>

                    <p:outputLabel value="Email"/>
                    <p:inputText id="email" requiredMessage="Polje email ne sme biti prazno!" validatorMessage="Email nije u korektnom formatu!" value="#{registrationController.ugostitelj.email}">
                        <f:validateRegex pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$"/>
                    </p:inputText>
                    <p:message for="email"/>

                    <p:outputLabel rendered="#{registrationController.renderPreduzetnikData()}" value="Ime"/>
                    <p:inputText rendered="#{registrationController.renderPreduzetnikData()}" required="true" requiredMessage="Polje ime ne sme biti prazno!" id="preduzetnikIme" value="#{registrationController.preduzetnik.ime}" label="Ime"/>
                    <p:message rendered="#{registrationController.renderPreduzetnikData()}" for="preduzetnikIme"/>

                    <p:outputLabel rendered="#{registrationController.renderPreduzetnikData()}" value="Prezime"/>
                    <p:inputText rendered="#{registrationController.renderPreduzetnikData()}" required="true" requiredMessage="Polje prezime ne sme biti prazno!" id="preduzetnikPrezime" value="#{registrationController.preduzetnik.prezime}" label="Prezime"/>
                    <p:message rendered="#{registrationController.renderPreduzetnikData()}" for="preduzetnikPrezime"/>

                    <p:outputLabel rendered="#{registrationController.renderPreduzetnikData()}" value="Adresa"/>
                    <p:inputText rendered="#{registrationController.renderPreduzetnikData()}" required="true" requiredMessage="Polje adresa ne sme biti prazno!" id="preduzetnikAdresa" value="#{registrationController.preduzetnik.adresa}" label="Adresa"/>
                    <p:message rendered="#{registrationController.renderPreduzetnikData()}" for="preduzetnikAdresa"/>

                    <p:outputLabel rendered="#{registrationController.renderPreduzetnikData()}" value="Delatnost"/>
                    <p:inputText rendered="#{registrationController.renderPreduzetnikData()}" required="true" requiredMessage="Polje delatnost ne sme biti prazno!" id="preduzetnikDelatnost" value="#{registrationController.preduzetnik.delatnost}" label="Delatnost"/>
                    <p:message rendered="#{registrationController.renderPreduzetnikData()}" for="preduzetnikDelatnost"/>

                    <p:outputLabel rendered="#{registrationController.renderPravnoLiceData()}" value="Pib"/>
                    <p:inputText rendered="#{registrationController.renderPravnoLiceData()}" required="true" requiredMessage="Polje pib ne sme biti prazno!" id="pravnoLicePib" value="#{registrationController.pravnoLice.pib}" label="Pib"/>
                    <p:message rendered="#{registrationController.renderPravnoLiceData()}" for="pravnoLicePib"/>

                    <p:outputLabel rendered="#{registrationController.renderPravnoLiceData()}" value="Naziv Firme"/>
                    <p:inputText rendered="#{registrationController.renderPravnoLiceData()}" required="true" requiredMessage="Polje naziv firme ne sme biti prazno!" id="pravnoLiceNazivFirme" value="#{registrationController.pravnoLice.nazivFirme}" label="Naziv Firme"/>
                    <p:message rendered="#{registrationController.renderPravnoLiceData()}" for="pravnoLiceNazivFirme"/>

                    <p:outputLabel rendered="#{registrationController.renderPravnoLiceData()}" value="Adresa Firme"/>
                    <p:inputText rendered="#{registrationController.renderPravnoLiceData()}" required="true" requiredMessage="Polje adresa firme ne sme biti prazno!" id="pravnoLiceAdresaFirme" value="#{registrationController.pravnoLice.adresaFirme}" label="Adresa Firme"/>
                    <p:message rendered="#{registrationController.renderPravnoLiceData()}" for="pravnoLiceAdresaFirme"/>

                    <p:outputLabel rendered="#{registrationController.renderFizickoLiceData()}" value="Ime"/>
                    <p:inputText rendered="#{registrationController.renderFizickoLiceData()}" required="true" requiredMessage="Polje ime ne sme biti prazno!" id="fizickoLiceIme" value="#{registrationController.fizickoLice.ime}" label="Ime"/>
                    <p:message rendered="#{registrationController.renderFizickoLiceData()}" for="fizickoLiceIme"/>

                    <p:outputLabel rendered="#{registrationController.renderFizickoLiceData()}" value="Prezime"/>
                    <p:inputText rendered="#{registrationController.renderFizickoLiceData()}" required="true" requiredMessage="Polje prezime ne sme biti prazno!" id="fizickoLicePrezime" value="#{registrationController.fizickoLice.prezime}" label="Prezime"/>
                    <p:message rendered="#{registrationController.renderFizickoLiceData()}" for="fizickoLicePrezime"/>

                    <p:outputLabel rendered="#{registrationController.renderFizickoLiceData()}" value="Adresa"/>
                    <p:inputText rendered="#{registrationController.renderFizickoLiceData()}" required="true" requiredMessage="Polje adresa ne sme biti prazno!" id="fizickoLiceAdresa" value="#{registrationController.fizickoLice.adresa}" label="Adresa"/>
                    <p:message rendered="#{registrationController.renderFizickoLiceData()}" for="fizickoLiceAdresa"/>

                    <p:outputLabel rendered="#{registrationController.renderFizickoLiceData()}" value="Jmbg"/>
                    <p:inputText rendered="#{registrationController.renderFizickoLiceData()}" required="true" requiredMessage="Polje Jmbg ne sme biti prazno!" id="fizickoLiceJmbg" value="#{registrationController.fizickoLice.jmbg}" label="Jmbg"/>
                    <p:message rendered="#{registrationController.renderFizickoLiceData()}" for="fizickoLiceJmbg"/>

                    <p:outputLabel rendered="#{registrationController.renderUstanovaData()}" value="Adresa"/>
                    <p:inputText rendered="#{registrationController.renderUstanovaData()}" required="true" requiredMessage="Polje adresa ne sme biti prazno!" id="ustanovaAdresa" value="#{registrationController.ustanova.adresa}" label="Adresa"/>
                    <p:message rendered="#{registrationController.renderUstanovaData()}" for="ustanovaAdresa"/>

                    <p:outputLabel rendered="#{registrationController.renderUstanovaData()}" value="Vrsta Ustanove"/>
                    <p:inputText rendered="#{registrationController.renderUstanovaData()}" required="true" requiredMessage="Polje vrsta ustanove ne sme biti prazno!" id="ustanovaVrstaUstanove" value="#{registrationController.ustanova.vrstaUstanove}" label="Vrsta Ustanove"/>
                    <p:message rendered="#{registrationController.renderUstanovaData()}" for="ustanovaVrstaUstanove"/>

                    <p:outputLabel rendered="#{registrationController.renderUstanovaData()}" value="Naziv"/>
                    <p:inputText rendered="#{registrationController.renderUstanovaData()}" required="true" requiredMessage="Polje naziv ne sme biti prazno!" id="ustanovaNaziv" value="#{registrationController.ustanova.naziv}" label="Naziv"/>
                    <p:message rendered="#{registrationController.renderUstanovaData()}" for="ustanovaNaziv"/>
                    
                    <p:outputLabel value=""/>
                    <p:commandButton action="#{registrationController.registerUgostitelj()}" value="Registruj" update="centralForm"/>

                </h:panelGrid>
                <h:panelGrid rendered="#{registrationController.renderTouristData()}" id="touristGrid" columns="3">


                    <p:outputLabel value="Username"/>
                    <p:inputText required="true" requiredMessage="Username can't be emtpy!" id="touristUsername" value="#{registrationController.turista.username}" label="Username" />
                    <p:message for="touristUsername"/>


                    <p:outputLabel value="Password"/>
                    <p:password required="true" requiredMessage="Password can't be emtpy!" id="touristPassword" value="#{registrationController.turista.password}" label="Password"/>
                    <p:message for="touristPassword"/>


                    <p:outputLabel value="Ime"/>
                    <p:inputText required="true" id="touristIme" value="#{registrationController.turista.ime}" label="Ime"/>
                    <p:message for="touristIme"/>

                    <p:outputLabel value="Prezime"/>
                    <p:inputText required="true" requiredMessage="Last name can't be emtpy!" id="touristPrezime" value="#{registrationController.turista.prezime}"/>
                    <p:message for="touristPrezime"/>

                    <p:outputLabel value="Email"/>
                    <p:inputText required="true" requiredMessage="Email can't be emtpy!" id="touristEmail" value="#{registrationController.turista.email}">
                        <f:validateRegex pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$"/>
                    </p:inputText>
                    <p:message for="touristEmail"/>

                    <p:outputLabel value=""/>
                    <p:commandButton action="#{registrationController.registerTourist()}" value="Register" update="centralForm"/>

                </h:panelGrid>
                <h:panelGrid rendered="#{registrationController.renderPrivilegedUserData()}" id="privilegedGrid" columns="3">


                    <p:outputLabel value="Username"/>
                    <p:inputText required="true" requiredMessage="Username can't be emtpy!" id="privilegedUsername" value="#{registrationController.privilegovaniKorisnik.username}" label="Username" />
                    <p:message for="privilegedUsername"/>


                    <p:outputLabel value="Password"/>
                    <p:password required="true" requiredMessage="Password can't be emtpy!" id="privilegedPassword" value="#{registrationController.privilegovaniKorisnik.password}" label="Password"/>
                    <p:message for="privilegedPassword"/>


                    <p:outputLabel value="Ime"/>
                    <p:inputText required="true" id="privilegedIme" value="#{registrationController.privilegovaniKorisnik.ime}" label="Ime"/>
                    <p:message for="privilegedIme"/>

                    <p:outputLabel value="Prezime"/>
                    <p:inputText required="true" requiredMessage="Last name can't be emtpy!" id="privilegedPrezime" value="#{registrationController.privilegovaniKorisnik.prezime}"/>
                    <p:message for="privilegedPrezime"/>

                    <p:outputLabel value="Email"/>
                    <p:inputText required="true" requiredMessage="Email can't be emtpy!" id="privilegedEmail" value="#{registrationController.privilegovaniKorisnik.email}">
                        <f:validateRegex pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$"/>
                    </p:inputText>
                    <p:message for="privilegedEmail"/>

                    <p:outputLabel value=""/>
                    <p:commandButton action="#{registrationController.registerPrivileged()}" value="Register" update="centralForm"/>

                </h:panelGrid>
            </p:panel>

    </ui:define>
</ui:composition>