<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/layout/overviewLayout.xhtml">

   <f:metadata>
      <f:viewAction action="#{ugostiteljOverviewController.init()}" />
   </f:metadata>

   <ui:define name="actions">
      <h:panelGrid style="width: 100%;text-align: center;">

         <p:commandButton rendered="#{ugostiteljOverviewController.currentUgostiteljLoggedIn()}" style="width: 100%" action="#{ugostiteljOverviewController.enableInput()}" value="Edit" update="ugostiteljGrid"/>
         <p:commandButton rendered="#{ugostiteljOverviewController.currentUgostiteljLoggedIn()}" style="width: 100%" action="#{ugostiteljOverviewController.saveChanges()}" value="Save changes" update="ugostiteljGrid"/>
      </h:panelGrid>
   </ui:define>

   <ui:define name="navigations">
      <p:menuitem
              value=" Podnesi Zahtev Za Kategorizaciju "
              icon="fa fa-play"
              outcome="#{navigationController.goToSubmitCategorizationRequest()}"
              actionListener="#"
              rendered="#{ugostiteljOverviewController.currentUgostiteljLoggedIn()}" />
   </ui:define>

   <ui:define name="mainContent">

      <p:panel header="Pregled Ugostitelja">

         <h:panelGrid  columns="4" id="ugostiteljGrid" cellspacing="10" columnClasses=",,insideDetailsColumn70,">
            <p:outputLabel value="Username"/>
            <p:inputText disabled="#{ugostiteljOverviewController.inputDisabled()}" id="username" value="#{ugostiteljOverviewController.ugostitelj.username}" label="Username"/>

            <p:outputLabel value="Email"/>
            <p:inputText disabled="#{ugostiteljOverviewController.inputDisabled()}" id="email" value="#{ugostiteljOverviewController.ugostitelj.email}"/>

            <p:outputLabel rendered="#{ugostiteljOverviewController.renderPreduzetnikData()}" value="Ime"/>
            <p:inputText rendered="#{ugostiteljOverviewController.renderPreduzetnikData()}" disabled="#{ugostiteljOverviewController.inputDisabled()}" required="true" id="preduzetnikIme" value="#{ugostiteljOverviewController.preduzetnik.ime}" label="Ime"/>

            <p:outputLabel rendered="#{ugostiteljOverviewController.renderPreduzetnikData()}" value="Prezime"/>
            <p:inputText rendered="#{ugostiteljOverviewController.renderPreduzetnikData()}" disabled="#{ugostiteljOverviewController.inputDisabled()}" required="true" id="preduzetnikPrezime" value="#{ugostiteljOverviewController.preduzetnik.prezime}" label="Prezime"/>

            <p:outputLabel rendered="#{ugostiteljOverviewController.renderPreduzetnikData()}" value="Adresa"/>
            <p:inputText rendered="#{ugostiteljOverviewController.renderPreduzetnikData()}" disabled="#{ugostiteljOverviewController.inputDisabled()}" required="true" id="preduzetnikAdresa" value="#{ugostiteljOverviewController.preduzetnik.adresa}" label="Adresa"/>

            <p:outputLabel rendered="#{ugostiteljOverviewController.renderPreduzetnikData()}" value="Delatnost"/>
            <p:inputText rendered="#{ugostiteljOverviewController.renderPreduzetnikData()}" disabled="#{ugostiteljOverviewController.inputDisabled()}" required="true" id="preduzetnikDelatnost" value="#{ugostiteljOverviewController.preduzetnik.delatnost}" label="Delatnost"/>

            <p:outputLabel rendered="#{ugostiteljOverviewController.renderPravnoLiceData()}" value="Pib"/>
            <p:inputText rendered="#{ugostiteljOverviewController.renderPravnoLiceData()}" disabled="#{ugostiteljOverviewController.inputDisabled()}" required="true" id="pravnoLicePib" value="#{ugostiteljOverviewController.pravnoLice.pib}" label="Pib"/>

            <p:outputLabel rendered="#{ugostiteljOverviewController.renderPravnoLiceData()}" value="Naziv Firme"/>
            <p:inputText rendered="#{ugostiteljOverviewController.renderPravnoLiceData()}" disabled="#{ugostiteljOverviewController.inputDisabled()}" required="true" id="pravnoLiceNazivFirme" value="#{ugostiteljOverviewController.pravnoLice.nazivFirme}" label="Naziv Firme"/>

            <p:outputLabel rendered="#{ugostiteljOverviewController.renderPravnoLiceData()}" value="Adresa Firme"/>
            <p:inputText rendered="#{ugostiteljOverviewController.renderPravnoLiceData()}" disabled="#{ugostiteljOverviewController.inputDisabled()}" required="true" id="pravnoLiceAdresaFirme" value="#{ugostiteljOverviewController.pravnoLice.adresaFirme}" label="Adresa Firme"/>

            <p:outputLabel rendered="#{ugostiteljOverviewController.renderFizickoLiceData()}" value="Ime"/>
            <p:inputText rendered="#{ugostiteljOverviewController.renderFizickoLiceData()}" disabled="#{ugostiteljOverviewController.inputDisabled()}" required="true" id="fizickoLiceIme" value="#{ugostiteljOverviewController.fizickoLice.ime}" label="Ime"/>

            <p:outputLabel rendered="#{ugostiteljOverviewController.renderFizickoLiceData()}" value="Prezime"/>
            <p:inputText rendered="#{ugostiteljOverviewController.renderFizickoLiceData()}" disabled="#{ugostiteljOverviewController.inputDisabled()}" required="true" id="fizickoLicePrezime" value="#{ugostiteljOverviewController.fizickoLice.prezime}" label="Prezime"/>

            <p:outputLabel rendered="#{ugostiteljOverviewController.renderFizickoLiceData()}" value="Adresa"/>
            <p:inputText rendered="#{ugostiteljOverviewController.renderFizickoLiceData()}" disabled="#{ugostiteljOverviewController.inputDisabled()}" required="true" id="fizickoLiceAdresa" value="#{ugostiteljOverviewController.fizickoLice.adresa}" label="Adresa"/>

            <p:outputLabel rendered="#{ugostiteljOverviewController.renderFizickoLiceData()}" value="Jmbg"/>
            <p:inputText rendered="#{ugostiteljOverviewController.renderFizickoLiceData()}" disabled="#{ugostiteljOverviewController.inputDisabled()}" required="true" id="fizickoLiceJmbg" value="#{ugostiteljOverviewController.fizickoLice.jmbg}" label="Jmbg"/>

            <p:outputLabel rendered="#{ugostiteljOverviewController.renderUstanovaData()}" value="Adresa"/>
            <p:inputText rendered="#{ugostiteljOverviewController.renderUstanovaData()}" disabled="#{ugostiteljOverviewController.inputDisabled()}" required="true" id="ustanovaAdresa" value="#{ugostiteljOverviewController.ustanova.adresa}" label="Adresa"/>

            <p:outputLabel rendered="#{ugostiteljOverviewController.renderUstanovaData()}" value="Vrsta Ustanove"/>
            <p:inputText rendered="#{ugostiteljOverviewController.renderUstanovaData()}" disabled="#{ugostiteljOverviewController.inputDisabled()}" required="true" id="ustanovaVrstaUstanove" value="#{ugostiteljOverviewController.ustanova.vrstaUstanove}" label="Vrsta Ustanove"/>

            <p:outputLabel rendered="#{ugostiteljOverviewController.renderUstanovaData()}" value="Naziv"/>
            <p:inputText rendered="#{ugostiteljOverviewController.renderUstanovaData()}" disabled="#{ugostiteljOverviewController.inputDisabled()}" required="true" id="ustanovaNaziv" value="#{ugostiteljOverviewController.ustanova.naziv}" label="Naziv"/>

         </h:panelGrid>

      </p:panel>

      <p:panel id="ugostiteljskiObjektiPanel" toggleable="true" collapsed="true">

         <f:facet name="header">
            <p:outputLabel id="ugostiteljskiObjektiPanelId" value="Ugostiteljski objekti : #{ugostiteljOverviewController.ugostitelj.ugostiteljskiObjekti.size()}" />
         </f:facet>

         <ui:decorate template="/common/tableTemplate.xhtml">
            <ui:param name="tableId" value="ugostiteljskiObjektiTableId" />
            <ui:param name="tableWV" value="ugostiteljskiObjektiTable" />
            <ui:param name="tableItems" value="#{ugostiteljOverviewController.ugostiteljskiObjekatList}" />

            <ui:define name="tableContent">
               <f:attribute name="sortBy" value="#{item.naziv}" />
               <f:attribute name="sortOrder" value="ascending" />

               <p:column headerText="Naziv" filterBy="#{item.naziv}" filterMatchMode="contains"
                         sortBy="#{item.naziv}">
                  <ui:include src="/link/ugostiteljskiObjekatLink.xhtml" >
                     <ui:param name="name" value="#{item.naziv}"/>
                     <ui:param name="id" value="#{item.id}"/>
                  </ui:include>
               </p:column>
               <p:column headerText="Kategorizovan"
                         sortBy="#{item.kategorizovan}">
                  <p:outputLabel value="#{item.kategorizovan}"/>
               </p:column>
               <p:column headerText="Istek kategorizacije"
                         sortBy="#{item.istekKategorizacije}">
                  <p:outputLabel rendered="#{item.kategorizovan}" value="#{item.istekKategorizacije}"/>
               </p:column>
               <p:column>
                  <p:commandButton value="Napravi rezervaciju" action="#{navigationController.navigateToReservation(item.id)}"/>
               </p:column>
            </ui:define>

         </ui:decorate>

      </p:panel>
      <p:panel id="categorizationRequestsPanel" toggleable="true" collapsed="true">

         <f:facet name="header">
            <p:outputLabel id="categorizationRequestsPanelId" value="Zahtevi za kategorizaciju : #{ugostiteljOverviewController.ugostitelj.zahteviZaKategorizaciju.size()}" />
         </f:facet>

         <ui:decorate template="/common/tableTemplate.xhtml">
            <ui:param name="tableId" value="categorizationRequestsTableId" />
            <ui:param name="tableWV" value="categorizationRequestsTable" />
            <ui:param name="tableItems" value="#{ugostiteljOverviewController.zahtevZaKategorizacijuList}" />

            <ui:define name="tableContent">
               <f:attribute name="sortBy" value="#{item.datumZahteva}" />
               <f:attribute name="sortOrder" value="ascending" />

               <p:column headerText="Ugostiteljski objekat" filterBy="#{item.ugostiteljskiObjekat.naziv}" filterMatchMode="contains"
                         sortBy="#{item.ugostiteljskiObjekat.naziv}">
                  <ui:include src="/link/ugostiteljskiObjekatLink.xhtml" >
                     <ui:param name="name" value="#{item.ugostiteljskiObjekat.naziv}"/>
                     <ui:param name="id" value="#{item.ugostiteljskiObjekat.id}"/>
                  </ui:include>
               </p:column>
               <p:column headerText="Datum zahteva"
                         sortBy="#{item.datumZahteva}">
                  <p:outputLabel value="#{item.datumZahteva}"/>
               </p:column>
               <p:column headerText="Pregledan"
                         sortBy="#{item.pregledan}">
                  <p:outputLabel value="#{item.pregledan}"/>
               </p:column>
               <p:column headerText="Odobren"
                         sortBy="#{item.odobren}">
                  <p:outputLabel rendered="#{item.pregledan}" value="#{item.odobren}"/>
               </p:column>
            </ui:define>

         </ui:decorate>

      </p:panel>

   </ui:define>
</ui:composition>
